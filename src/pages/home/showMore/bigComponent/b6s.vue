<style lang="less" scoped>
.car_washing{
        background-image: url(../../../../assets/images/life/xiche.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .dressing{
         background-size:60% 60%;
         background-repeat:no-repeat;
         background-image: url(../../../../assets/images/life/chuanyi.png);
    }
    .uv{
         background-image: url(../../../../assets/images/life/ziwaixianqiangdu.png);
         background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .sport{
         background-image: url(../../../../assets/images/life/yundong.png);
         background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .travel{
         background-image: url(../../../../assets/images/life/lvyou.png);
         background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .flu{
         background-image: url(../../../../assets/images/life/ganmao.png);
         background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .baoyu{
        background-image: url(../../../../assets/images/weather-blue/baoyu.png);
        background-size:60% 60%;
        background-repeat:no-repeat;

    }
    .bingbao{
        background-image: url(../../../../assets/images/weather-blue/bingbao.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .dafeng{
        background-image: url(../../../../assets/images/weather-blue/dafeng.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .daxue{
        background-image: url(../../../../assets/images/weather-blue/daxue.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .dayu{
        background-image: url(../../../../assets/images/weather-blue/dayu.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .leizhenyu{
        background-image: url(../../../../assets/images/weather-blue/leizhenyu.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .qing{
        background-image: url(../../../../assets/images/weather-blue/qing.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .redom{
        background-image: url(../../../../assets/images/weather-blue/redom.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .shachenbao{
        background-image: url(../../../../assets/images/weather-blue/shachenbao.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .taifeng{
         background-size:100% 100%;
        background-image: url(../../../../assets/images/weather-blue/taifeng.png);
    }
    .wait{
        background-image: url(../../../../assets/images/weather-blue/wait.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .weifeng{
        background-image: url(../../../../assets/images/weather-blue/weifeng.png);
         background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .wu{
        background-image: url(../../../../assets/images/weather-blue/wu.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .wumai{
        background-image: url(../../../../assets/images/weather-blue/wumai.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .xiaoxue{
        background-image: url(../../../../assets/images/weather-blue/xiaoxue.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .xiaoyu{
        background-image: url(../../../../assets/images/weather-blue/xiaoyu.png);
         background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .yejianqing{
        background-image: url(../../../../assets/images/weather-blue/yejianqing.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .yejianduoyun{
        background-image: url(../../../../assets/images/weather-blue/duoyun.png);
         background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .duoyun{
        background-image: url(../../../../assets/images/weather-blue/duoyun.png);
       background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .yin{
        background-image: url(../../../../assets/images/weather-blue/yin.png);
         background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .yujiaxue{
        background-image: url(../../../../assets/images/weather-blue/yujiaxue.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .zhongxue{
        background-image: url(../../../../assets/images/weather-blue/zhongxue.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    .zhongyu{
        background-image: url(../../../../assets/images/weather-blue/zhongyu.png);
        background-size:60% 60%;
        background-repeat:no-repeat;
    }
    
    
    /*天气背景*/
   .qingBg{
   		background: url(../../../../assets/images/weatherBg/qingBg.png)
   }
   .yuBg{
   		background: url(../../../../assets/images/weatherBg/yuBg.png)
   }
   .yinBg{
   		background: url(../../../../assets/images/weatherBg/yinBg.png)
   }
    
    
.b6s{
    width:100% !important;
    height:80%;
    position: relative;
    .bg{
    	position: absolute;
    	top: 0;
    	width: 100%;
    	height: 100%;
    	border-radius: 10px;
    	box-shadow: 10px 10px 70px 20px rgba(19,38,105,0.3) inset;
    }
    .weatherInfo{
    	position: absolute;
    	width: 594px;
    	height: 274px;
    	top: 129px;
    	left: 113px;
    	color: #fff;
    	.leftItem{
    		position: absolute;
    		left: 0;
    		width: 234px;
    		height: 100%;
    		.wImg{
    			position: absolute;
    			width: 100px;
    			height: 86px;
    			left: 30px;
    			background-size: 100%;
    		}
    		.temp{
    			position: absolute;
    			width: 150px;
    			height: 70px;
    			top: 100px;
    			left: 20px;
    			p:nth-child(1){
    				float: left;
    				width: 102px;
    				height: 100%;
    				line-height: 70px;
    				font-size: 70px;
    			}
    			p:nth-child(2){
    				float: left;
    				width: 48px;
    				height: 100%;
    				line-height: 70px;
    				font-size: 70px;
    				font{
    					position: absolute;
    					font-size: 20px;
    				}
    				font:nth-child(1){
    					width: 30px;
    					height: 26px;
    					font-size: 30px;
    					top: -20px;
    					right: 20px;
    				}
    				font:nth-child(2){
    					width: 100px;
    					height: 20px;
    					font-size: 20px;
    					bottom: 26px;
    					right: -30px;
    				}
    			}
    			.clearfix{
    				clear: both;
    			}
    			p:nth-child(4){
    				font-size: 22px;
    				height: 22px;
    				margin-top: 30px;
    			}
    			p:nth-child(5){
    				font-size: 22px;
    				height: 20px;
    				margin-top: 20px;
    			}
    		}
    	}
    	.middleLine{
    		position: absolute;
    		left: 234px;
    		top: 40px;
    		width: 2px;
    		height: 220px;
    		background-color: rgba(255,255,255,0.46);
    	}
    	.rightItem{
    		position: absolute;
    		right: 0;
    		width: 358px;
    		height: 100%;
    		.oneDay{
    			width: 98px;
    			height: 262px;
    			position: absolute;
    			top: 10px;
    			left: 76px;
    			p:nth-child(1){
    				width: 100%;
    				font-size: 26px;
    				position: absolute;
    				top: 10px;
    				text-align: center;
    			}
    			p:nth-child(2){
    				width: 100%;
    				font-size: 20px;
    				position: absolute;
    				top: 52px;
    				text-align: center;
    			}
    			.wImg{
    				position: absolute;
	    			width: 100px;
	    			height: 86px;
	    			left: 0;
	    			top: 90px;
	    			background-size: 100%;
    			}
    			p:nth-child(4){
    				position: absolute;
    				width: 100%;
    				font-size: 22px;
    				height: 22px;
    				bottom: 50px;
    			}
    			p:nth-child(5){
    				position: absolute;
    				width: 100%;
    				font-size: 22px;
    				height: 20px;
    				bottom: 10px;
    			}
    		}
    		
    			.twoDay{
    			width: 98px;
    			height: 262px;
    			position: absolute;
    			top: 10px;
    			right: 0;
    			p:nth-child(1){
    				width: 100%;
    				font-size: 26px;
    				position: absolute;
    				top: 10px;
    				text-align: center;
    			}
    			p:nth-child(2){
    				width: 100%;
    				font-size: 20px;
    				position: absolute;
    				top: 52px;
    				text-align: center;
    			}
    			.wImg{
    				position: absolute;
	    			width: 100px;
	    			height: 86px;
	    			left: 0;
	    			top: 90px;
	    			background-size: 100%;
    			}
    			p:nth-child(4){
    				position: absolute;
    				width: 100%;
    				font-size: 22px;
    				height: 22px;
    				bottom: 50px;
    			}
    			p:nth-child(5){
    				position: absolute;
    				width: 100%;
    				font-size: 22px;
    				height: 20px;
    				bottom: 10px;
    			}
    		}
    	}
    }
}
</style>
<template>
    <div class="b6s" v-show="showStatus">
    	<!--天气背景-->
    	<div class="bg" :class="weatherImgBg">
    		
    	</div>
       <div class="weatherInfo">
       		<div class="leftItem">
       			<!--天气图片-->
       			<div class="wImg" :class="weatherImg"></div>
       			<div class="temp">
       				<p>{{nowRes.temperature}}</p>
       				<p>
       					<font>℃</font>
       					<font>{{nowRes.text}}</font>
       				</p>
       				<p class="clearfix"></p>
       				<p>9 ~ 17 ℃</p>
       				<p>{{nowRes.text}}</p>
       			</div>
       		</div>
       		<div class="middleLine"></div>
       		<div class="rightItem">
       			<div class="oneDay">
       				<p>周四</p>
       				<p>{{oneDayText}}</p>
       				<p class="wImg" :class="weatherImg"></p>
       				<p>9 ~ 17 ℃</p>
       				<p>{{nowRes.text}}</p>
       			</div>
       			<div class="twoDay">
       				<p>周四</p>
       				<p>{{twoDayText}}</p>
       				<p class="wImg" :class="weatherImg"></p>
       				<p>9 ~ 17 ℃</p>
       				<p>{{nowRes.text}}</p>
       			</div>
       		</div>
       </div>
    </div>
</template>

<script>
import Vue from 'vue'
// import b6ss from '@/pages/home/showMore/smallComponent/b6ss.vue'
import showMoreData from '@/common/js/mixin/showMoreData.js'
import vAjax from '@/common/js/v-ajax.js'
import optionProps from '@/common/js/mixin/optionProps.js'
Vue.use(vAjax);
  export default {
    name:'B6S',
    mixins: [showMoreData,optionProps],
    props:['updateTurist'],
    watch:{
        updatePlace:function(val){
            let _self = this
            _self.showStatus =false;
            setTimeout(function(){
                _self.showStatus =true;
                _self.sendRequest()
            },500)
        }
    },
    data() {
      return {
            currentIndex: 0,
            showStatus:true,
            timer:[],
            weekday:['周日','周一','周二','周三','周四','周五','周六'],
            lifegroup:[
                {part:'car_washing',text:'洗车'},
                {part:'dressing',text:'穿衣'},
                {part:'flu',text:'感冒'},
                {part:'sport',text:'运动'},
                {part:'travel',text:'旅游'},
                {part:'uv',text:'紫外线强度'}
            ],
            apiData:{
                nowurl:"http://api.seniverse.com/v3/weather/now.json",
                lifeurl:"https://api.seniverse.com/v3/life/suggestion.json",
                dailyurl:"https://api.seniverse.com/v3/weather/daily.json",
                uid:"U780C8ABAA",
                key:"s2iqikevs0vffmvy",
                location:"qingyuan",
                curPage:1
            },
            nowRes:{
                    code:"13",
                    temperature:"..",
                    text:"..",
            },
            lifeRes:{
                car_washing:{brief:"loading"},
                dressing:{brief:"loading"},
                flu:{brief:"loading"},
                sport:{brief:"loading"},
                travel:{brief:"loading"},
                uv:{brief:"loading"}
            },
            dailyRes:[{"date":"2018-01-06","text_day":"loading","code_day":"13","text_night":"loading","code_night":"15","high":"14","low":"11","precip":"","wind_direction":"无持续风向","wind_direction_degree":"","wind_speed":"10","wind_scale":"2"},{"date":"2018-01-07","text_day":"中雨","code_day":"14","text_night":"大雨","code_night":"15","high":"16","low":"6","precip":"","wind_direction":"无持续风向","wind_direction_degree":"","wind_speed":"10","wind_scale":"2"},{"date":"2018-01-08","text_day":"中雨","code_day":"14","text_night":"小雨","code_night":"13","high":"15","low":"5","precip":"","wind_direction":"北","wind_direction_degree":"0","wind_speed":"15","wind_scale":"3"}]
      }
    },
    computed:{
            weatherImg:function(){
                return  this.switchWea(this.nowRes.code);
            },
            weatherImgBg:function(){
                return  this.switchWeaBg(this.nowRes.code);
            },
            twoImg:function(){
                return  this.switchWea(this.dailyRes[1].code_day);
            },
            oneDayText:function(){
                return (new Date(this.dailyRes[1].date).getMonth()+1)+'月 '+(new Date(this.dailyRes[1].date).getDate()-1)+'日'
            },
            twoDayText:function(){
                return (new Date(this.dailyRes[1].date).getMonth()+1)+'月 '+(new Date(this.dailyRes[1].date).getDate())+'日'
            },
            threeDayText:function(){
                return this.weekday[new Date(this.dailyRes[2].date).getDay()]+'  '+(new Date(this.dailyRes[2].date).getMonth()+1)+'月  '+(new Date(this.dailyRes[2].date).getDate())+'日'
            },
            threeImg:function(){
                return  this.switchWea(this.dailyRes[2].code_day);
            }
        },
    components: {

    },
    methods:{
        switchWea(s){
            if(s==='-1'){
                    return 'redom'
                }else if(s==='0'||s==='2'){
                    return 'yejianqing'
                }else if(s==='1'||s==='3'){
                    return 'yejianqing'
                }else if(s==='4'){
                    return 'duoyun'
                }else if(s==='5'||s==='8'||s==='9'){
                    return 'yin'
                }else if(s=== '5'||s==='7'){
                    return 'yejianduoyun'
                }else if(s==='10'||s==='11'||s==='12'){
                    return 'leizhenyu'
                }else if(s==='13'||s==='14'){
                    return 'xiaoyu'
                }else if(s==='15'||s==='16'){
                    return 'zhongyu'
                }else if(s==='17'||s==='18'){
                    return 'dayu'
                }else if(s==='19'||s==='20'){
                    return 'yujiaxue'
                }else if(s==='21'||s==='22'){
                    return 'xiaoxue'
                }else if(s==='23'||s==='24'){
                    return 'zhongxue'
                }else if(s==='25'||s==='14'){
                    return 'daxue'
                }else if(s==='26'||s==='27'||s==='28'||s==='29'){
                    return 'shachenbao'
                }else if(s==='30'){
                    return 'wu'
                }else if(s==='31'){
                    return 'wumai'
                }
                else if(s==='32'){
                    return 'weifeng'
                }else if(s==='33'||s==='34'){
                    return 'dafeng'
                }else if(s==='35'||s==='36'){
                    return 'taifeng'
                }
        },
        
        //天气背景
        switchWeaBg(s){
            if(s==='-1'){
                    return 'redomBg'
                }else if(s==='0'||s==='2'){
                    return 'yejianqingBg'
                }else if(s==='1'||s==='3'){
                    return 'yejianqingBg'
                }else if(s==='4'){
                    return 'yinBg'
                }else if(s==='5'||s==='8'||s==='9'){
                    return 'yinBg'
                }else if(s=== '5'||s==='7'){
                    return 'yejianduoyunBg'
                }else if(s==='10'||s==='11'||s==='12'){
                    return 'leizhenyuBg'
                }else if(s==='13'||s==='14'){
                    //return 'xiaoyuBg'
                    return 'yuBg'
                }else if(s==='15'||s==='16'){
                    //return 'zhongyuBg'
                    return 'yuBg'
                }else if(s==='17'||s==='18'){
                    //return 'dayuBg'
                    return 'yuBg'
                }else if(s==='19'||s==='20'){
                    return 'yujiaxueBg'
                }else if(s==='21'||s==='22'){
                    return 'xiaoxueBg'
                }else if(s==='23'||s==='24'){
                    return 'zhongxueBg'
                }else if(s==='25'||s==='14'){
                    return 'daxueBg'
                }else if(s==='26'||s==='27'||s==='28'||s==='29'){
                    return 'shachenbaoBg'
                }else if(s==='30'){
                    return 'wuBg'
                }else if(s==='31'){
                    return 'wumaiBg'
                }
                else if(s==='32'){
                    return 'weifengBg'
                }else if(s==='33'||s==='34'){
                    return 'dafengBg'
                }else if(s==='35'||s==='36'){
                    return 'taifengBg'
                }
        },
    getLife(){
            var _self= this
            this.$ajax({
                type:'GET',
                url:this.apiData.lifeurl,
                dataType:'jsonp',
                jsonp:'jsonpcallback',
                data:{
                    uid : this.apiData.uid,
                    sig : this.apiData.key,
                    location : this.apiData.location,
                },
                success:function(res){
                    _self.$nextTick(function () {
                    _self.lifeRes = res.results[0].suggestion;
                    });
                },
                error:function(err){
                    console.log(err);
                }
            })
        },
        getNow(){
            var _self= this
            this.$ajax({
                type:'GET',
                url:this.apiData.nowurl,
                dataType:'jsonp',
                jsonp:'jsonpcallback',
                data:{
                    uid : this.apiData.uid,
                    sig : this.apiData.key,
                    location : this.apiData.location,
                },
                success:function(res){
                    _self.$nextTick(function () {
                    _self.nowRes = res.results[0].now;
                    });
                },
                error:function(err){
                    console.log(err);
                }
            })
        },
        getDaily(){
            var _self= this
            this.$ajax({
                type:'GET',
                url:this.apiData.dailyurl,
                dataType:'jsonp',
                jsonp:'jsonpcallback',
                data:{
                    uid : this.apiData.uid,
                    sig : this.apiData.key,
                    location : this.apiData.location,
                },
                success:function(res){
                    _self.$nextTick(function () {
                    _self.dailyRes = res.results[0].daily;
                    });
                },
                error:function(err){
                    console.log(err);
                }
            })
        },
        sendRequest(){
            this.getDaily();
            this.getNow();
            this.getLife();
        },
    },
    mounted(){
        this.sendRequest();
        this.$emit('hideWeeks');
        this.$emit('hideVdate')
        // this.$emit('showDoubleSelect');
        this.$emit('showDateFormatChose',[])
    }
  }
</script>

